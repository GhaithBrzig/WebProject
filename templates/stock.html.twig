{% extends "base.html.twig" %}
{% block title %} Stock {% endblock %}
{% block container %}

<div class="container mt-5">
    <div class="row tm-content-row">
      <div class="col-sm-12 col-md-12 col-lg-8 col-xl-8 tm-block-col">
        <div class="tm-bg-primary-dark tm-block tm-block-products">
          <h2 class="tm-block-title">Stock</h2>
            <form method="post" action="{{ path ('SEARCH')}}"> 
            <input type="text" name="search" placeholder="Search"> <input type="submit" value="Search" class="btn-light" style="height:29px;">
            </form>
          <div class="tm-product-table-container">
            
            <table class="table table-hover tm-table-small tm-product-table">
              <thead>
                <tr>
                 
                  <th scope="col"><a href="{{ path ('stock4')}}">Category <i class="fas fa-sort"></i></a></th>
                  <th scope="col"><a href="{{ path ('stock3')}}">Name <i class="fas fa-sort"></i></a></th>
                  <th scope="col">Unite</th>
                  <th scope="col"><a href="{{ path ('stock2')}}">In Stock <i class="fas fa-sort"></i></a></i></th>
                  <th scope="col">Unit Price</th>
                  <th scope="col">Total Price</th>
                  <th scope="col">Delete</th>
                  <th scope="col">Edit</th>
                  <th scope="col">&nbsp;</th>
                </tr>
              </thead>
              <tbody>
                <tr {% for p in produits %}>
              
                  <td style="text-align:center"> {{p.IdCategorie.nom}} </td>
                  <td style="text-align:center"> {{p.nom}} </td>
                  <td style="text-align:center"> {{p.unite}} </td>
                  <td style="text-align:center"> {{p.quantite}} </td>
                  <td style="text-align:center"> {{p.PrixUnitaire}} </td>
                  <td style="text-align:center"> {{p.PrixTotal}} </td>
                  <td style="text-align:center">
                    <a href="{{ path('del',{'id':p.id}) }}">
                      <i class="far fa-trash-alt tm-product-delete-icon" style='font-size:20px;color:rgb(255, 255, 255)'></i>
                    </a>
                  </td>
                  <td style="text-align:center">
                    <a href="{{ path('Upd',{'id':p.id}) }}">
                        <i class="fas fa-edit" style='font-size:20px;color:yellow'></i>
                    </a>
                  </td>
                  {% if p.quantite < 6  %}
                  <td>  <div class="tm-status-circle cancelled" ></td>
                  {% endif %}
                </tr {% endfor %}>
                
              </tbody>
            </table>
          </div>

          {% if isPaginated %}
          <nav aria-label="  Page navigation example">
            <ul class="pagination">
                 {% if page == 1 %}
              <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                  {% else %}
              <li class="page-item"><a class="page-link" href={{ path('stock', {page: page - 1, nbre: nbre}) }}>Previous</a></li>
                {% endif %}
              {% for i in range(1, nbrePage) %}
                 {% if page == i %}
                     <li class="page-item active "><a class="page-link" href={{ path('stock', {page: i, nbre: nbre}) }}>{{i}}</a></li>
                  {% else %}
                     <li class="page-item "><a class="page-link" href={{ path('stock', {page: i, nbre: nbre}) }}>{{i}}</a></li>
                {% endif %}
              {% endfor %}
              {% if page == nbrePage %}
              <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
              {% else %}
              <li class="page-item"><a class="page-link" href={{ path('stock', {page: page + 1, nbre: nbre}) }}>Next</a></li>
              {% endif %}
            </ul>
          </nav>
          {% endif %}
          <!-- table container -->
          <a
            href={{ path ('addStock')}}
            class="btn btn-primary btn-block text-uppercase mb-3">Add new product</a>
         
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-4 col-xl-4 tm-block-col">
        <div class="tm-bg-primary-dark tm-block tm-block-product-categories">
          <h2 class="tm-block-title">Stock Categories</h2>
          <div class="tm-product-table-container">
            <table class="table tm-table-small tm-product-table">
              <tbody>
                <tr {% for c in categories %}>
                  <td class="tm-product-name">{{c.nom}}</td>
                  <td class="text-center">
                    <a href={{ path ('Delc',{'id':c.id})}} class="tm-product-delete-link">
                      <i class="far fa-trash-alt tm-product-delete-icon"></i>
                    </a>
                  </td>
                  <td class="text-center">
                    <a href={{ path ('Updc',{'id':c.id})}} class="tm-product-delete-link">
                      <i class="fas fa-edit" style='font-size:20px;color:yellow'></i>

                    </a>
                  </td>
                </tr {% endfor %}>
                
              </tbody>
            </table>
          </div>
          <!-- table container -->
          <a
            href={{ path ('Addc')}}
            class="btn btn-primary btn-block text-uppercase mb-3">Add new category</a>
        </div>
      </div>
    </div>
  </div>
  
  {% endblock %}